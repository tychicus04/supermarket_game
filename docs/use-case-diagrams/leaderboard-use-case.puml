@startuml Leaderboard_Use_Case
!theme plain
skinparam backgroundColor #FFFFFF
skinparam actorStyle awesome

title Use Case Diagram - Leaderboard (Báº£ng Xáº¿p Háº¡ng)

left to right direction

' Actors
actor "Player\n(NgÆ°á»i chÆ¡i)" as Player
actor "System\n(Há»‡ thá»‘ng)" as System
actor "Database\n(CÆ¡ sá»Ÿ dá»¯ liá»‡u)" as Database

' Package for Leaderboard
rectangle "Leaderboard System" {
    ' Main Use Cases
    package "Player Functions\n(Chá»©c nÄƒng ngÆ°á»i chÆ¡i)" {
        usecase "View Leaderboard\n(Xem báº£ng xáº¿p háº¡ng)" as UC1
        usecase "View Top 10 Players\n(Xem top 10 ngÆ°á»i chÆ¡i)" as UC2
        usecase "See Own Ranking\n(Xem háº¡ng cá»§a mÃ¬nh)" as UC3
        usecase "Compare Scores\n(So sÃ¡nh Ä‘iá»ƒm)" as UC4
    }

    ' System Use Cases
    package "System Functions\n(Chá»©c nÄƒng há»‡ thá»‘ng)" {
        usecase "Fetch Leaderboard Data\n(Láº¥y dá»¯ liá»‡u xáº¿p háº¡ng)" as UC5
        usecase "Calculate Rankings\n(TÃ­nh toÃ¡n thá»© háº¡ng)" as UC6
        usecase "Sort by Score\n(Sáº¯p xáº¿p theo Ä‘iá»ƒm)" as UC7
        usecase "Get Max Score per Player\n(Láº¥y Ä‘iá»ƒm cao nháº¥t má»—i ngÆ°á»i)" as UC8
        usecase "Format Display Data\n(Äá»‹nh dáº¡ng dá»¯ liá»‡u hiá»ƒn thá»‹)" as UC9
    }

    ' Database Use Cases
    package "Database Operations\n(Thao tÃ¡c cÆ¡ sá»Ÿ dá»¯ liá»‡u)" {
        usecase "Query Scores Table\n(Truy váº¥n báº£ng Ä‘iá»ƒm)" as UC10
        usecase "Aggregate Player Scores\n(Tá»•ng há»£p Ä‘iá»ƒm ngÆ°á»i chÆ¡i)" as UC11
        usecase "Order by Score DESC\n(Sáº¯p xáº¿p giáº£m dáº§n)" as UC12
        usecase "Limit to Top 10\n(Giá»›i háº¡n top 10)" as UC13
    }

    ' Display Use Cases
    package "Display Features\n(TÃ­nh nÄƒng hiá»ƒn thá»‹)" {
        usecase "Show Rank Medals\n(Hiá»ƒn thá»‹ huy chÆ°Æ¡ng)" as UC14
        usecase "Display Player Names\n(Hiá»ƒn thá»‹ tÃªn ngÆ°á»i chÆ¡i)" as UC15
        usecase "Display Scores\n(Hiá»ƒn thá»‹ Ä‘iá»ƒm sá»‘)" as UC16
        usecase "Show Loading State\n(Hiá»ƒn thá»‹ tráº¡ng thÃ¡i táº£i)" as UC17
        usecase "Handle No Data\n(Xá»­ lÃ½ khÃ´ng cÃ³ dá»¯ liá»‡u)" as UC18
    }
}

' Player relationships
Player --> UC1 : requests
Player --> UC2 : views
Player --> UC3 : checks
Player --> UC4 : compares

' System relationships
System --> UC5 : executes
System --> UC6 : performs
System --> UC7 : applies
System --> UC8 : computes
System --> UC9 : formats

' Database relationships
Database --> UC10 : executes query
Database --> UC11 : aggregates
Database --> UC12 : orders
Database --> UC13 : limits

' Include relationships
UC1 ..> UC5 : <<include>>
UC1 ..> UC17 : <<include>>
UC5 ..> UC10 : <<include>>
UC6 ..> UC8 : <<include>>
UC6 ..> UC7 : <<include>>
UC8 ..> UC11 : <<include>>
UC7 ..> UC12 : <<include>>
UC2 ..> UC13 : <<include>>
UC2 ..> UC14 : <<include>>
UC2 ..> UC15 : <<include>>
UC2 ..> UC16 : <<include>>
UC9 ..> UC14 : <<include>>
UC9 ..> UC15 : <<include>>
UC9 ..> UC16 : <<include>>

' Extend relationships
UC18 ..> UC1 : <<extend>>\n(if no scores exist)
UC3 ..> UC2 : <<extend>>\n(find self in list)
UC4 ..> UC2 : <<extend>>\n(compare with others)

' Dependency relationships
UC5 ..> UC6 : triggers
UC6 ..> UC9 : produces
UC10 ..> UC11 : feeds data
UC11 ..> UC12 : prepares for
UC12 ..> UC13 : before

' Notes
note right of UC2
  Only top 10 players
  shown globally
end note

note right of UC8
  Shows each player's
  highest score only,
  not all games
end note

note bottom of UC14
  Medals displayed:
  ðŸ¥‡ 1st place
  ðŸ¥ˆ 2nd place
  ðŸ¥‰ 3rd place
end note

note left of UC10
  SQL Query:
  SELECT username,
  MAX(score) as max_score
  FROM scores
  GROUP BY username
  ORDER BY max_score DESC
  LIMIT 10
end note

note right of UC17
  Shows "Loading..."
  while fetching data
end note

note right of UC18
  Shows "No scores yet!"
  if table is empty
end note

@enduml
